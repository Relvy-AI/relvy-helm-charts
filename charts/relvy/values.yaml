# Relvy Configuration
# Generated by install.sh on Thu Jul 10 10:47:28 PDT 2025

# Global configuration
global:
  environment: onprem
  imageRegistry: docker.io
  imageTag: 'v0.3.7'
  imagePullPolicy: IfNotPresent
  imageName: relvy/relvy-app-onprem
  imagePullSecrets:
    - name: relvy-registry-secret

# Web application configuration
web:
  enabled: true
  replicas: 2

  resources:
    requests:
      memory: "1Gi"
      cpu: "500m"
    limits:
      memory: "2Gi"
      cpu: "1000m"

  service:
    type: ClusterIP
    port: 80
    targetPort: 8000

  ingress:
    enabled: true
    className: alb
    annotations:
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS":443}, {"HTTP":80}]'
      alb.ingress.kubernetes.io/ssl-redirect: '443'
      alb.ingress.kubernetes.io/healthcheck-path: /health
      alb.ingress.kubernetes.io/healthcheck-port: traffic-port
      alb.ingress.kubernetes.io/success-codes: '200'
    hosts:
      - host: ''
        paths:
          - path: /
            pathType: Prefix
    tls:
      - hosts:
          - ''

# Celery worker configuration
celery:
  enabled: true
  replicas: 6

  resources:
    requests:
      memory: "2Gi"
      cpu: "1000m"
    limits:
      memory: "4Gi"
      cpu: "2000m"

# Celery beat scheduler configuration
celeryBeat:
  enabled: true
  replicas: 1

  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "500m"

# Redis configuration
redis:
  enabled: true
  image:
    repository: redis
    tag: 7-alpine
    pullPolicy: IfNotPresent

  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "500m"

  service:
    type: ClusterIP
    port: 6379
    targetPort: 6379

# Database Configuration
database:
  enabled: true
  endpoint: ""
  port: 5432
  name: "relvydb"
  sslMode: "require"

# Secrets configuration
secrets:
  database: relvy-db-secret
  slack: relvy-slack-secret
  flask: relvy-flask-secret
  langfuse: relvy-langfuse-secret
  revyaiRegistry: relvy-registry-secret
  license: relvy-license-secret

# Application Configuration
config:
  serverHostname: ""
  environment: "onprem"

# Persistence configuration
persistence:
  enabled: true
  storageClass: ""
  size: 10Gi
